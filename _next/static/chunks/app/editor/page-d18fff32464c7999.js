(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[219],{9364:function(e,t,i){Promise.resolve().then(i.bind(i,6526))},6526:function(e,t,i){"use strict";i.d(t,{default:function(){return O}});var l=i(7437),n=i(2265),r=i(7684),d=i(920);let o={id:(0,d.Z)(),name:"Untitled",grade:"5.5",setter:"",image:"/img/MOCK_rock_wall.jpg",color1:"#09e570",color2:"",holds:[],naturals:[]};var s=i(2890),a=i.n(s),h=i(6481);let c=()=>{let e=(0,n.useRef)(null),[t,i]=(0,n.useState)({width:0,height:0}),l=()=>{e.current&&i({width:e.current.offsetWidth,height:e.current.offsetHeight})};return(0,n.useEffect)(()=>(l(),window.addEventListener("resize",l),()=>{window.removeEventListener("resize",l)}),[]),[e,t]};function u(e){let[t,i]=e.routeState,[r,d]=e.highlightedState,[o,s]=e.selectedState,[a,u]=c(),[x,m]=(0,n.useState)([]);(0,n.useEffect)(()=>{if(null!=o){let e=t.naturals.filter(e=>e.id==o);e.length>0?m([e[0].hold1id,e[0].id,e[0].hold2id]):m([o])}else m([null!=o?o:"help"])},[t,o]);let f=(e,l)=>{s(t.naturals.flatMap(e=>[e.hold1id,e.hold2id]).includes(e)?t.naturals.filter(t=>t.hold1id==e||t.hold2id==e)[0].id:e);let n=t.holds.filter(t=>t.id==e)[0],r={id:n.id,x:l.x/u.width*100+n.x,y:l.y/u.height*100+n.y};i({...t,holds:[...t.holds.filter(t=>t.id!=e),r]})};return(0,l.jsxs)("div",{children:[(0,l.jsx)("svg",{style:{position:"absolute",width:0,height:0},children:(0,l.jsxs)("defs",{children:[(0,l.jsxs)("pattern",{id:"cautionPattern",patternUnits:"userSpaceOnUse",width:"20",height:"20",patternTransform:"rotate(-45)",children:[(0,l.jsx)("rect",{width:"10",height:"20",fill:t.color1}),(0,l.jsx)("rect",{x:"10",width:"10",height:"20",fill:t.color2?t.color2:t.color1})]}),(0,l.jsxs)("pattern",{id:"lightCautionPattern",patternUnits:"userSpaceOnUse",width:"20",height:"20",patternTransform:"rotate(-45)",children:[(0,l.jsx)("rect",{width:"10",height:"20",fill:(0,h._d)(t.color1,.2)}),(0,l.jsx)("rect",{x:"10",width:"10",height:"20",fill:t.color2?(0,h._d)(t.color2,.2):(0,h._d)(t.color1,.2)})]})]})}),(0,l.jsxs)("div",{style:{position:"relative",width:"100%",height:"auto"},children:[(0,l.jsx)("img",{ref:a,src:t.image,alt:t.name,style:{width:"100%",height:"auto"}}),t.holds.map(e=>(0,l.jsx)(g,{hold:e,setHighlighted:()=>d(e.id),unHighlight:()=>d(null),isHighlighted:r===e.id,isSelected:x.includes(e.id),handleStop:f})),t.naturals.map(e=>{let i=t.holds.find(t=>t.id===e.hold1id),n=t.holds.find(t=>t.id===e.hold2id);return(0,l.jsx)("svg",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none"},children:(0,l.jsx)("line",{x1:"".concat(i.x,"%"),y1:"".concat(i.y,"%"),x2:"".concat(n.x,"%"),y2:"".concat(n.y,"%"),stroke:"url(#cautionPattern)",strokeWidth:".5rem"})})})]})]})}function g(e){return(0,l.jsx)(a(),{bounds:"parent",onStop:(t,i)=>e.handleStop(e.hold.id,i),position:{x:0,y:0},children:(0,l.jsx)("div",{style:{position:"absolute",top:"".concat(e.hold.y,"%"),left:"".concat(e.hold.x,"%"),width:"1px",height:"1px"},onMouseEnter:()=>e.setHighlighted(),onMouseLeave:()=>e.unHighlight(),children:(0,l.jsx)("svg",{width:"4rem",height:"4rem",style:{transform:"translate(-50%, -50%)"},children:(0,l.jsx)("circle",{cx:"2rem",cy:"2rem",r:"1.5rem",fill:e.isHighlighted?"url(#lightCautionPattern)":"url(#cautionPattern)",stroke:e.isSelected?h.Oh:"none",strokeWidth:"0.25rem"})})})},e.hold.id)}var x=i(8711),m=i(4444),f=i(1705),j=i(8549),p=i(6065),v=i(3396),Z=i(5870),w=i(3983),S=i(511),y=i(5786),b=i(6548),C=i(335),H=i(8819),k=i(7170),W=i(3478),E=i(5853);let M=(0,m.Z)({palette:{mode:"dark"}}),_=["5.5","5.6","5.7","5.8","5.9","5.10","5.11","5.12","5.13"];function N(e){let[t,i]=e.routeState,[o,s]=e.highlightedState,[a,h]=e.selectedState,[c,u]=(0,n.useState)([]);function g(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;e+=20*Math.random(),l+=20*Math.random();let n={id:(0,d.Z)(),x:e,y:l};return i({...t,holds:[...t.holds,n]}),h(n.id),n}return(0,n.useEffect)(()=>{let e=t.naturals.flatMap(e=>[e.hold1id,e.hold2id]);u(t.holds.filter(t=>!e.includes(t.id)))},[t]),console.log("image",t.image),(0,l.jsxs)(r.Z,{spacing:1,padding:"1rem",style:{width:"100%"},children:[(0,l.jsx)(x.Z,{}),(0,l.jsxs)(f.Z,{theme:M,children:[(0,l.jsxs)(j.Z,{children:[(0,l.jsx)(p.Z,{id:"demo-simple-select-img",children:"Wall"}),(0,l.jsx)(v.Z,{value:t.image.substring(5),labelId:"demo-simple-select-img",label:"Wall",onChange:e=>{i({...t,image:"/img/".concat(e.target.value)})},children:e.imageNames.map(e=>(0,l.jsx)(Z.Z,{value:e,children:e}))})]}),(0,l.jsx)(w.Z,{label:"Route Name",variant:"outlined",value:t.name,onChange:e=>{i({...t,name:e.target.value})}}),(0,l.jsxs)(r.Z,{direction:"row",spacing:1,children:[(0,l.jsx)(w.Z,{style:{width:"50%"},label:"Setter",variant:"outlined",value:t.setter,onChange:e=>{i({...t,setter:e.target.value})}}),(0,l.jsxs)(j.Z,{style:{width:"50%"},children:[(0,l.jsx)(p.Z,{id:"demo-simple-select-label",children:"Grade"}),(0,l.jsx)(v.Z,{value:t.grade,labelId:"demo-simple-select-label",label:"Grade",onChange:e=>{i({...t,grade:e.target.value})},children:_.map(e=>(0,l.jsx)(Z.Z,{value:e,children:e}))})]})]})]}),(0,l.jsxs)(r.Z,{direction:"row",spacing:2,height:"12rem",children:[(0,l.jsx)(W.gW,{style:{height:"100%",width:"50%"},color:t.color1,onChange:e=>{i({...t,color1:e})}}),(0,l.jsxs)(r.Z,{style:{width:"50%",padding:0},children:[(0,l.jsxs)(r.Z,{direction:"row",justifyContent:"center",alignItems:"center",children:[(0,l.jsx)(S.Z,{children:"Secondary Color?"}),(0,l.jsx)(f.Z,{theme:M,children:(0,l.jsx)(y.Z,{checked:""!=t.color2,onChange:e=>{i({...t,color2:e.target.checked?"#d64242":""})}})})]}),""!==t.color2?(0,l.jsx)(W.gW,{style:{height:"100%",width:"100%"},color:t.color2,onChange:e=>{i({...t,color2:e})}}):(0,l.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"55%"},children:(0,l.jsx)(S.Z,{variant:"subtitle2",color:"darkgray",children:"No Secondary Color"})})]})]}),(0,l.jsx)(x.Z,{}),(0,l.jsxs)(r.Z,{direction:"row",spacing:1,height:"2.5rem",children:[(0,l.jsx)(b.Z,{onClick:()=>g(),variant:"contained",style:{fontWeight:"bold",borderRadius:"10px",width:"33%"},children:(0,l.jsxs)(r.Z,{direction:"row",spacing:.5,children:[(0,l.jsx)(H.Z,{}),(0,l.jsx)(S.Z,{fontWeight:"bold",children:"Hold"})]})}),(0,l.jsx)(b.Z,{onClick:()=>(function(){let e=g(45,50),l=g(55,50),n={id:(0,d.Z)(),hold1id:e.id,hold2id:l.id};i({...t,holds:[...t.holds,e,l],naturals:[...t.naturals,n]}),h(n.id)})(),variant:"contained",style:{fontWeight:"bold",borderRadius:"10px",width:"33%"},children:(0,l.jsxs)(r.Z,{direction:"row",spacing:.5,children:[(0,l.jsx)(H.Z,{}),(0,l.jsx)(S.Z,{fontWeight:"bold",children:"Natural"})]})}),(0,l.jsx)(b.Z,{onClick:()=>(function(){let e=new Blob([JSON.stringify(t)],{type:"text/plain;charset=utf-8"});(0,k.saveAs)(e,"".concat(t.name,".json"))})(),variant:"contained",style:{fontWeight:"bold",borderRadius:"10px",width:"33%"},children:(0,l.jsx)(S.Z,{fontWeight:"bold",children:"Export"})})]}),(0,l.jsxs)(r.Z,{spacing:1,children:[c.toSorted((e,t)=>e.id.localeCompare(t.id)).map(e=>(0,l.jsx)(I,{name:e.id.substring(0,4),onHover:()=>s(e.id),onHoverEnd:()=>s(null),onSelect:()=>h(e.id),isHovered:e.id==o,isSelected:e.id==a,onDelete:()=>i({...t,holds:t.holds.filter(t=>t.id!=e.id)}),description:"Hold"})),t.naturals.toSorted((e,t)=>e.id.localeCompare(t.id)).map(e=>(0,l.jsx)(I,{name:e.id.substring(0,4),onHover:()=>s(e.id),onHoverEnd:()=>s(null),onSelect:()=>h(e.id),isHovered:e.id==o,isSelected:e.id==a,onDelete:()=>i({...t,holds:t.holds.filter(t=>![e.hold1id,e.hold2id].includes(t.id)),naturals:t.naturals.filter(t=>t.id!=e.id)}),description:"Natural Hold"}))]})]})}function I(e){return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(x.Z,{style:{backgroundColor:e.isSelected?e.isHovered?"#7fa6c9":"#488bc7":e.isHovered?"grey":"#292929",borderRadius:"10px",minHeight:"2.5rem",width:"100%"},onMouseEnter:()=>e.onHover(),onMouseLeave:()=>e.onHoverEnd(),onClick:()=>e.onSelect(),children:(0,l.jsxs)(r.Z,{direction:"row",alignItems:"center",padding:"0.5rem",children:[(0,l.jsxs)(S.Z,{fontWeight:"bold",children:[e.description," "]}),(0,l.jsxs)(S.Z,{marginLeft:"0.5rem",fontWeight:"bold",color:"lightgrey",children:["(",e.name,")"]}),(0,l.jsx)(C.Z,{size:"small",style:{marginLeft:"auto",color:"red",minWidth:"0"},onClick:()=>{e.onDelete()},children:(0,l.jsx)(E.Z,{})})]})})})}var O=function(e){let[t,i]=(0,n.useState)(o),[d,s]=(0,n.useState)(null),[a,h]=(0,n.useState)(null);return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(r.Z,{direction:"row",children:[(0,l.jsx)(x.Z,{style:{width:"65%"},padding:"1rem",children:(0,l.jsx)(u,{routeState:[t,i],highlightedState:[d,s],selectedState:[a,h]})}),(0,l.jsx)(x.Z,{style:{width:"35%"},children:(0,l.jsx)(N,{routeState:[t,i],highlightedState:[d,s],selectedState:[a,h],imageNames:e.images})})]})})}},6481:function(e,t,i){"use strict";i.d(t,{Oh:function(){return l},_d:function(){return n}});let l="#488bc7";function n(e,t){let i=e.startsWith("#")?e.slice(1):e,l=parseInt(i.substring(0,2),16),n=parseInt(i.substring(2,4),16),r=parseInt(i.substring(4,6),16);return"#"+Math.min(255,l+Math.floor((255-l)*t)).toString(16).padStart(2,"0")+Math.min(255,n+Math.floor((255-n)*t)).toString(16).padStart(2,"0")+Math.min(255,r+Math.floor((255-r)*t)).toString(16).padStart(2,"0")}}},function(e){e.O(0,[666,548,444,853,971,23,744],function(){return e(e.s=9364)}),_N_E=e.O()}]);
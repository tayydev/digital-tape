(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[219],{9364:function(e,t,i){Promise.resolve().then(i.bind(i,6526))},6526:function(e,t,i){"use strict";i.d(t,{default:function(){return O}});var n=i(7437),l=i(2265),r=i(7684),d=i(920);let o={id:(0,d.Z)(),name:"Untitled",grade:"5.5",setter:"",image:"/img/MOCK_rock_wall.jpg",color1:"#09e570",color2:"",holds:[],naturals:[]};var s=i(2890),a=i.n(s),h=i(6481);let c=()=>{let e=(0,l.useRef)(null),[t,i]=(0,l.useState)({width:0,height:0}),n=()=>{e.current&&i({width:e.current.offsetWidth,height:e.current.offsetHeight})};return(0,l.useEffect)(()=>(n(),window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}),[]),[e,t]};function u(e){let[t,i]=e.routeState,[r,d]=e.highlightedState,[o,s]=e.selectedState,[a,u]=c(),[x,m]=(0,l.useState)([]);(0,l.useEffect)(()=>{if(null!=o){let e=t.naturals.filter(e=>e.id==o);e.length>0?m([e[0].hold1id,e[0].id,e[0].hold2id]):m([o])}else m([null!=o?o:"help"])},[t,o]);let f=(e,n)=>{s(t.naturals.flatMap(e=>[e.hold1id,e.hold2id]).includes(e)?t.naturals.filter(t=>t.hold1id==e||t.hold2id==e)[0].id:e);let l=t.holds.filter(t=>t.id==e)[0],r={id:l.id,x:n.x/u.width*100+l.x,y:n.y/u.height*100+l.y};i({...t,holds:[...t.holds.filter(t=>t.id!=e),r]})};return(0,n.jsxs)("div",{children:[(0,n.jsx)("svg",{style:{position:"absolute",width:0,height:0},children:(0,n.jsxs)("defs",{children:[(0,n.jsxs)("pattern",{id:"cautionPattern",patternUnits:"userSpaceOnUse",width:"20",height:"20",patternTransform:"rotate(-45)",children:[(0,n.jsx)("rect",{width:"10",height:"20",fill:t.color1}),(0,n.jsx)("rect",{x:"10",width:"10",height:"20",fill:t.color2?t.color2:t.color1})]}),(0,n.jsxs)("pattern",{id:"lightCautionPattern",patternUnits:"userSpaceOnUse",width:"20",height:"20",patternTransform:"rotate(-45)",children:[(0,n.jsx)("rect",{width:"10",height:"20",fill:(0,h._d)(t.color1,.2)}),(0,n.jsx)("rect",{x:"10",width:"10",height:"20",fill:t.color2?(0,h._d)(t.color2,.2):(0,h._d)(t.color1,.2)})]})]})}),(0,n.jsxs)("div",{style:{position:"relative",width:"100%",height:"auto"},children:[(0,n.jsx)("img",{ref:a,src:t.image,alt:t.name,style:{width:"100%",height:"auto"}}),t.holds.map(e=>(0,n.jsx)(g,{hold:e,setHighlighted:()=>d(e.id),unHighlight:()=>d(null),isHighlighted:r===e.id,isSelected:x.includes(e.id),handleStop:f})),t.naturals.map(e=>{let i=t.holds.find(t=>t.id===e.hold1id),l=t.holds.find(t=>t.id===e.hold2id);return(0,n.jsx)("svg",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none"},children:(0,n.jsx)("line",{x1:"".concat(i.x,"%"),y1:"".concat(i.y,"%"),x2:"".concat(l.x,"%"),y2:"".concat(l.y,"%"),stroke:"url(#cautionPattern)",strokeWidth:".5rem"})})})]})]})}function g(e){return(0,n.jsx)(a(),{bounds:"parent",onStop:(t,i)=>e.handleStop(e.hold.id,i),position:{x:0,y:0},children:(0,n.jsx)("div",{style:{position:"absolute",top:"".concat(e.hold.y,"%"),left:"".concat(e.hold.x,"%"),width:"1px",height:"1px"},onMouseEnter:()=>e.setHighlighted(),onMouseLeave:()=>e.unHighlight(),children:(0,n.jsx)("svg",{width:"4rem",height:"4rem",style:{transform:"translate(-50%, -50%)"},children:(0,n.jsx)("circle",{cx:"2rem",cy:"2rem",r:"1.5rem",fill:e.isHighlighted?"url(#lightCautionPattern)":"url(#cautionPattern)",stroke:e.isSelected?h.Oh:"none",strokeWidth:"0.25rem"})})})},e.hold.id)}var x=i(8711),m=i(4444),f=i(1705),j=i(8549),p=i(6065),v=i(5683),Z=i(3983),w=i(5870),S=i(511),b=i(5786),y=i(6548),H=i(8819),C=i(7170),k=i(3478);let W=(0,m.Z)({palette:{mode:"dark"}}),E=["5.5","5.6","5.7","5.8","5.9","5.10","5.11","5.12","5.13"];function M(e){let[t,i]=e.routeState,[o,s]=e.highlightedState,[a,h]=e.selectedState,[c,u]=(0,l.useState)([]);function g(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;e+=20*Math.random(),n+=20*Math.random();let l={id:(0,d.Z)(),x:e,y:n};return i({...t,holds:[...t.holds,l]}),h(l.id),l}return console.log("image names",e.imageNames),(0,l.useEffect)(()=>{let e=t.naturals.flatMap(e=>[e.hold1id,e.hold2id]);u(t.holds.filter(t=>!e.includes(t.id)))},[t]),(0,n.jsxs)(r.Z,{spacing:1,padding:"1rem",style:{width:"100%"},children:[(0,n.jsx)(x.Z,{}),(0,n.jsxs)(f.Z,{theme:W,children:[(0,n.jsxs)(j.Z,{children:[(0,n.jsx)(p.Z,{id:"demo-simple-select-img",children:"Wall"}),(0,n.jsx)(v.Z,{value:t.grade,labelId:"demo-simple-select-img",label:"Wall",onChange:e=>{i({...t,image:e.target.value})}})]}),(0,n.jsx)(Z.Z,{label:"Route Name",variant:"outlined",value:t.name,onChange:e=>{i({...t,name:e.target.value})}}),(0,n.jsxs)(r.Z,{direction:"row",spacing:1,children:[(0,n.jsx)(Z.Z,{style:{width:"50%"},label:"Setter",variant:"outlined",value:t.setter,onChange:e=>{i({...t,setter:e.target.value})}}),(0,n.jsxs)(j.Z,{style:{width:"50%"},children:[(0,n.jsx)(p.Z,{id:"demo-simple-select-label",children:"Grade"}),(0,n.jsx)(v.Z,{value:t.grade,labelId:"demo-simple-select-label",label:"Grade",onChange:e=>{i({...t,grade:e.target.value})},children:E.map(e=>(0,n.jsx)(w.Z,{value:e,children:e}))})]})]})]}),(0,n.jsxs)(r.Z,{direction:"row",spacing:2,height:"12rem",children:[(0,n.jsx)(k.gW,{style:{height:"100%",width:"50%"},color:t.color1,onChange:e=>{i({...t,color1:e})}}),(0,n.jsxs)(r.Z,{style:{width:"50%",padding:0},children:[(0,n.jsxs)(r.Z,{direction:"row",justifyContent:"center",alignItems:"center",children:[(0,n.jsx)(S.Z,{children:"Secondary Color?"}),(0,n.jsx)(f.Z,{theme:W,children:(0,n.jsx)(b.Z,{checked:""!=t.color2,onChange:e=>{i({...t,color2:e.target.checked?"#d64242":""})}})})]}),""!==t.color2?(0,n.jsx)(k.gW,{style:{height:"100%",width:"100%"},color:t.color2,onChange:e=>{i({...t,color2:e})}}):(0,n.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"55%"},children:(0,n.jsx)(S.Z,{variant:"subtitle2",color:"darkgray",children:"No Secondary Color"})})]})]}),(0,n.jsx)(x.Z,{}),(0,n.jsxs)(r.Z,{direction:"row",spacing:1,height:"2.5rem",children:[(0,n.jsx)(y.Z,{onClick:()=>g(),variant:"contained",style:{fontWeight:"bold",borderRadius:"10px",width:"33%"},children:(0,n.jsxs)(r.Z,{direction:"row",spacing:.5,children:[(0,n.jsx)(H.Z,{}),(0,n.jsx)(S.Z,{fontWeight:"bold",children:"Hold"})]})}),(0,n.jsx)(y.Z,{onClick:()=>(function(){let e=g(45,50),n=g(55,50),l={id:(0,d.Z)(),hold1id:e.id,hold2id:n.id};i({...t,holds:[...t.holds,e,n],naturals:[...t.naturals,l]}),h(l.id)})(),variant:"contained",style:{fontWeight:"bold",borderRadius:"10px",width:"33%"},children:(0,n.jsxs)(r.Z,{direction:"row",spacing:.5,children:[(0,n.jsx)(H.Z,{}),(0,n.jsx)(S.Z,{fontWeight:"bold",children:"Natural"})]})}),(0,n.jsx)(y.Z,{onClick:()=>(function(){let e=new Blob([JSON.stringify(t)],{type:"text/plain;charset=utf-8"});(0,C.saveAs)(e,"".concat(t.name,".json"))})(),variant:"contained",style:{fontWeight:"bold",borderRadius:"10px",width:"33%"},children:(0,n.jsx)(S.Z,{fontWeight:"bold",children:"Export"})})]}),(0,n.jsxs)(r.Z,{spacing:1,children:[c.toSorted((e,t)=>e.id.localeCompare(t.id)).map(e=>(0,n.jsx)(_,{name:e.id.substring(0,4),onHover:()=>s(e.id),onHoverEnd:()=>s(null),onSelect:()=>h(e.id),isHovered:e.id==o,isSelected:e.id==a})),t.naturals.toSorted((e,t)=>e.id.localeCompare(t.id)).map(e=>(0,n.jsx)(N,{name:e.id.substring(0,4),onHover:()=>s(e.id),onHoverEnd:()=>s(null),onSelect:()=>h(e.id),isHovered:e.id==o,isSelected:e.id==a}))]})]})}function _(e){return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(x.Z,{style:{backgroundColor:e.isSelected?e.isHovered?"#7fa6c9":"#488bc7":e.isHovered?"grey":"#292929",borderRadius:"10px",minHeight:"2.5rem",width:"100%"},onMouseEnter:()=>e.onHover(),onMouseLeave:()=>e.onHoverEnd(),onClick:()=>e.onSelect(),children:(0,n.jsxs)(r.Z,{direction:"row",alignItems:"center",padding:"0.5rem",children:[(0,n.jsx)(S.Z,{fontWeight:"bold",children:"Hold "}),(0,n.jsx)(S.Z,{marginLeft:"auto",fontWeight:"bold",children:e.name})]})})})}function N(e){return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(x.Z,{style:{backgroundColor:e.isSelected?e.isHovered?(0,h._d)(h.Oh,.3):h.Oh:e.isHovered?(0,h._d)(h.lz,.3):h.lz,borderRadius:"10px",minHeight:"2.5rem",width:"100%"},onMouseEnter:()=>e.onHover(),onMouseLeave:()=>e.onHoverEnd(),onClick:()=>e.onSelect(),children:(0,n.jsxs)(r.Z,{direction:"row",alignItems:"center",padding:"0.5rem",children:[(0,n.jsx)(S.Z,{fontWeight:"bold",children:"Natural Hold "}),(0,n.jsx)(S.Z,{marginLeft:"auto",fontWeight:"bold",children:e.name})]})})})}var O=function(e){let[t,i]=(0,l.useState)(o),[d,s]=(0,l.useState)(null),[a,h]=(0,l.useState)(null);return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(r.Z,{direction:"row",children:[(0,n.jsx)(x.Z,{style:{width:"65%"},padding:"1rem",children:(0,n.jsx)(u,{routeState:[t,i],highlightedState:[d,s],selectedState:[a,h]})}),(0,n.jsx)(x.Z,{style:{width:"35%"},children:(0,n.jsx)(M,{routeState:[t,i],highlightedState:[d,s],selectedState:[a,h],imageNames:e.images})})]})})}},6481:function(e,t,i){"use strict";i.d(t,{Oh:function(){return n},_d:function(){return r},lz:function(){return l}});let n="#488bc7",l="#292929";function r(e,t){let i=e.startsWith("#")?e.slice(1):e,n=parseInt(i.substring(0,2),16),l=parseInt(i.substring(2,4),16),r=parseInt(i.substring(4,6),16);return"#"+Math.min(255,n+Math.floor((255-n)*t)).toString(16).padStart(2,"0")+Math.min(255,l+Math.floor((255-l)*t)).toString(16).padStart(2,"0")+Math.min(255,r+Math.floor((255-r)*t)).toString(16).padStart(2,"0")}}},function(e){e.O(0,[666,42,444,852,971,23,744],function(){return e(e.s=9364)}),_N_E=e.O()}]);